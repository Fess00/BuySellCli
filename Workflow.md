# Запуск проекта

- Установите последнюю версию node.js на свою систему.
- Загрузите данный проект к себе на компьютер.
- Откройте терминал вашеей системы в папке с проектом.
- Запустите команду ```npm i``` для проверки работоспособности npm.
- Скачайте tsc и typescript в свой проект, используя команды ```npm i tsc``` и ```npm i typescript``` соответсвенно.
- Добавьте в ваш проект .env файл и заполните его опраясь на .env.example. Там описаны все необходимые переменные окружения.
- Запустите команду ```npm run start:mock```, котороя запускает json сервер от куда буду получться первичные данные (ктегории, пользователи).
- Откройте еще один терминал и запустите команду ```npm run cli -- --generate n filename url```, где ```n``` - это кол-во генерируемых записей, ```filename``` - это путь куда должен будет записаться файл в формате tsv, например ./filename.tsv, ```url``` - это адрес сервера от куда будут браться данные в нашем случае json сервер, он запускается по адресу http://localhost:3000, так что нужно указать его.
  - Важно отметить, что запуск данной команды немного отличается в Linux и Windows. В системах основанных на Linux или Unix все работает так, как было описано выше. В Windows нужно будет использовать эмулятор терминал Linux систем такой как WSL (Windows Subsystem for Linux), для запуска команд связанны c ```npm run cli```:
    1. Один из вариантов - это установить WSL и через него запускать команды ```npm run cli```.
    2. Другой вариант - это использоват git bash при наличии установленного git на вашем компьютере. Git bash в git для Windows является как раз эмулятором терминала Linux, что отлично подходит для наших целей.
- Скачайте и установите на свою систему MongoDB. На сайте MongoDB есть Comunity версия ПО, котроя распространяется совершенно бесплатно.
- После установки MongoDB настройка быза данных различается:
   - **Linux/Unix:** откройте еще один термиинал и введите там команду ```mongosh```, таким оразом вы войдете в оболочку MongoDB из которой будет произовдиться короткая настройка:
     - Далее наберите команду ```use buysell```, таким образом мы создадим коллекцию(таблицу) в нашей базе данных где будут хранится наши документы(записи).
   - **Windows:** после установки MongoDB на вашу систему у вас появится приложение MongoDB Compass. Запустите его и в открывшемся окне вы увидите GUI интерфейс для удобной работы с базой данных под Windows. Нажмите на кнопку *Add new connection*. В появившемся окне в поле *Name* введите любое имя подключения какое захотите. Затем нажмите на кнопку *Save & connect*. Слева вы увидите подключение к базу данных с вашем введенным именем. Затем наведясь на имя подключения вы увидите кнопку *+*, нажмите на нее. В появившемся окне вы увидите в поле *Database Name* введите имя базы данных совпадающее с именем, котрое вы указали в .env фале. В поле *Collection Name* укажите любое имя коллекции(таблицы) для вашей новой быза данных. Данная коллекция(таблица) нам будет не нужна, но MongoDB Compass требует от нас обязательно указать имя коллекция, котороая автоматически будет создана при создание нашей базы данных.
- Запустите команду ```npm run cli -- --import filepath```, где ```filepath``` - это путь к сгенерированному ранее файлу командой ```--generate```, например ./filename.tsv.
  1. **Опционально:** вы можете посмотреть для наглядности созданные только что коллекции(таблицы) в нашей базе данных. Для Linux/Unix вы можете перейти в оболочку MongoDB и набрать команду ```show collections```, а в Windows перейдя в MongoDB Compass справа в вашей ранее созданной базе данных появятся 3 новых коллекции **Adverts**, **Categories** и **Users**.
- Теперь можно запустить сам сервер. Для этого пропишите в любом новом терминале/комаедной сткроке команду ```npm run buysell```. Теперь сервер слушает все входящие http запросы по порту 5000. Адрес сервера при этом следующий: http://localhost:5000.

# Опционально

Можно протестировать запросы к сереверу через Postman или же через обычную строку ввода адреса в браузере.

# Сценарии

1. Создание новго объявления. **Маршрут:** http://localhost:5000/advert/create. **Пример:** http://localhost:5000/advert/create/http://localhost:5000/advert/create?token=g4328gure8r&title=obj&description=desc&publishDate=2022-01-02&imagePath=logo&advertType=Buy&price=800&author=3&categories=1,2
2. Редактирование объявления. **Маршрут:** http://localhost:5000/advert/change. **Пример:** http://localhost:5000/advert/change/http://localhost:5000/advert/create?token=g4328gure8r&title=obj&description=desc&publishDate=2022-01-02&imagePath=logo&advertType=Buy&price=800&author=3&categories=1,2
3. Удаление объйявления. **Маршрут:** http://localhost:5000/advert/delete. **Пример:** http://localhost:5000/advert/delete/http://localhost:5000/advert/create?token=g4328gure8r&title=obj&description=desc&publishDate=2022-01-02&imagePath=logo&advertType=Buy&price=800&author=3&categories=1,2
4. Получение списка категорий. **Маршрут:** http://localhost:5000/category/list. **Пример:** http://localhost:5000/category/list 
5. Получение списка объявлений определенной категории. **Маршрут:** http://localhost:5000/advert/by. **Пример:** http://localhost:5000/advert/byhttp://localhost:5000/advert/by?name=Дом
6. Получение списка новых объявлений. **Маршрут:** http://localhost:5000/advert/list/by. **Пример:** http://localhost:5000/advert/list/by 
7. Получение списка обсуждаемых объявлений. **Маршрут:** http://localhost:5000/advert/list/popular. **Пример:** http://localhost:5000/advert/list/popular
8. Получение детальной информации об объявлении. **Маршрут:** http://localhost:5000/advert/info. **Пример:** http://localhost:5000/advert/info?id=4
9. Создание нового пользователя. **Маршрут:** http://localhost:5000/user/add. **Пример:** http://localhost:5000/user/add?name=Владимир&surname=Соколов&email=line_art@gmail.com&imagePath=logo&password=lineartsokol836
10. Вход пользователя в приложение. **Маршрут:** http://localhost:5000/user/login. **Пример:** http://localhost:5000/user/login?email=saimon283@gmail.com&password=letsplay